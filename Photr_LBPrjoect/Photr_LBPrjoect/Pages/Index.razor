@page "/"
@using Photr_LBPrjoect.Controller
@using BusinessLogic
@using Common
@using Photr_LBPrjoect.Model
@using Common.ViewModels
@using MatBlazor
@using System.Drawing
@page "/on-init"

<PageTitle>Index Shop page</PageTitle>


@*@foreach (var selectedItem in allOffersForMainPage)
{

}*@

@code {
	BusinessLogic.Helper helper = new BusinessLogic.Helper(false);

	List<Photr> allDataBaseEntrys = new List<Photr>();
	List<Picture> allDataBasePic = new List<Picture>();
	List<MainPageViewModel> allOffersForMainPage = new List<MainPageViewModel>();
	protected override void OnInitialized()
	{
		allDataBaseEntrys = helper.GetData<Photr>();
	}
	public void GetShopItems()
	{
		allDataBaseEntrys = helper.GetData<Photr>();

		foreach (var item in allDataBaseEntrys)
		{
			//allDataBasePic = helper.GetSpecificData<Picture>(whereData: item.Author, whereStatement: nameof(Picture.Author));
			allDataBasePic = new List<Picture>(){new Picture()
			{
				Id = 1,
				Author = "testSeller",
				Photo = new Bitmap(@"C:\Users\dario\Documents\GitHub\Photr_LBProject\Photr_LBPrjoect\Photr_LBPrjoect\wwwroot\testimage\testimage.png")
			}
			};
			MainPageViewModel oneOffer = new MainPageViewModel()
				{
					Author = item.Author,
					Price = item.Price,
					Titel = item.Titel,
					TitelPic = allDataBasePic.FirstOrDefault().Photo
				};
			allOffersForMainPage.Add(oneOffer);
		}
	}
	public void itemClicked(object item)
	{

	}

}